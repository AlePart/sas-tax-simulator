"use strict";(self.webpackChunksas_tax_simulator=self.webpackChunksas_tax_simulator||[]).push([[962],{8962:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var i=a(5043),s=a(579);const o=e=>{let{title:t,children:a,className:i=""}=e;return(0,s.jsxs)("div",{className:`mb-6 p-4 bg-white rounded-lg shadow ${i}`,children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:t}),a]})},r=e=>{let{label:t,value:a,bgColor:i="bg-blue-50",className:o=""}=e;return(0,s.jsxs)("div",{className:`p-3 ${i} rounded ${o}`,children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:t}),(0,s.jsx)("p",{className:"text-lg font-semibold",children:a})]})},l=e=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e),n=function(e){return{id:e,nome:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Nuovo Socio",tipo:"operativo",percentuale:50,redditoEsterno:0,giornateLavorate:220,buoniPasto:!1,valoreBuoniPasto:8,buoniPastoEsentiFino:8,trasferte:!1,giorniTrasferta:0,importoTrasfertaGiorno:50,trasfertaEsenteFino:46.48}},c=e=>e<=15e3?.23*e:e<=28e3?3450+.25*(e-15e3):e<=5e4?6700+.35*(e-28e3):14400+.43*(e-5e4),d=e=>{let{fatturato:t,setFatturato:a,costi:i,setCosti:n,aliquotaIrap:c,setAliquotaIrap:d,aliquotaInps:m,setAliquotaInps:u,utileAziendale:x,irap:p,utileDopoIrap:g,costiSociOperativi:h,costiEsenti:b,costiNonEsenti:j}=e;return(0,s.jsxs)(o,{title:"Dati Aziendali",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fatturato Aziendale (\u20ac)"}),(0,s.jsx)("input",{type:"number",value:t,onChange:e=>a(Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Costi Aziendali Base (\u20ac)"}),(0,s.jsx)("input",{type:"number",value:i,onChange:e=>n(Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aliquota IRAP (%)"}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:c,onChange:e=>d(Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aliquota INPS (%)"}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:m,onChange:e=>u(Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(r,{label:"Costi Soci Operativi Totali:",value:l(h)}),(0,s.jsx)(r,{label:"di cui Esenti:",value:l(b),bgColor:"bg-green-50"}),(0,s.jsx)(r,{label:"di cui Non Esenti:",value:l(j),bgColor:"bg-yellow-50"})]}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(r,{label:"Utile Aziendale:",value:l(x)}),(0,s.jsx)(r,{label:`IRAP (${c}%):`,value:l(p)}),(0,s.jsx)(r,{label:"Utile dopo IRAP:",value:l(g),bgColor:"bg-green-50"})]}),(0,s.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("strong",{children:"Nota:"})," L'utile aziendale \xe8 calcolato sottraendo dal fatturato i costi base e solo i costi esenti dei soci operativi. La parte non esente di buoni pasto e trasferte \xe8 invece considerata come parte del reddito imponibile dei singoli soci."]})})]})},m=e=>{let{socio:t,updateSocio:a,rimuoviSocio:i}=e;return(0,s.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:t.nome}),(0,s.jsx)("button",{onClick:()=>i(t.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"Rimuovi"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Socio"}),(0,s.jsx)("input",{type:"text",value:t.nome,onChange:e=>a(t.id,"nome",e.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo Socio"}),(0,s.jsxs)("select",{value:t.tipo,onChange:e=>a(t.id,"tipo",e.target.value),className:"w-full p-2 border border-gray-300 rounded",children:[(0,s.jsx)("option",{value:"operativo",children:"Socio Operativo"}),(0,s.jsx)("option",{value:"capitale",children:"Socio di Capitale"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Percentuale di Partecipazione (%)"}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:t.percentuale,onChange:e=>a(t.id,"percentuale",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reddito Esterno (\u20ac)"}),(0,s.jsx)("input",{type:"number",value:t.redditoEsterno,onChange:e=>a(t.id,"redditoEsterno",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]}),"operativo"===t.tipo&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Giornate Lavorate"}),(0,s.jsx)("input",{type:"number",min:"0",max:"365",value:t.giornateLavorate,onChange:e=>a(t.id,"giornateLavorate",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]})]}),"operativo"===t.tipo&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.buoniPasto,onChange:e=>a(t.id,"buoniPasto",e.target.checked),className:"mr-2"}),"Buoni Pasto"]}),t.buoniPasto&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600",children:"Valore (\u20ac/giorno)"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",value:t.valoreBuoniPasto,onChange:e=>a(t.id,"valoreBuoniPasto",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600",children:"Esente fino a (\u20ac)"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",value:t.buoniPastoEsentiFino,onChange:e=>a(t.id,"buoniPastoEsentiFino",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.trasferte,onChange:e=>a(t.id,"trasferte",e.target.checked),className:"mr-2"}),"Rimborsi Trasferta"]}),t.trasferte&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600",children:"Giorni"}),(0,s.jsx)("input",{type:"number",min:"0",value:t.giorniTrasferta,onChange:e=>a(t.id,"giorniTrasferta",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600",children:"\u20ac/giorno"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",value:t.importoTrasfertaGiorno,onChange:e=>a(t.id,"importoTrasfertaGiorno",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-600",children:"Esente fino a (\u20ac)"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",value:t.trasfertaEsenteFino,onChange:e=>a(t.id,"trasfertaEsenteFino",Number(e.target.value)),className:"w-full p-2 border border-gray-300 rounded"})]})]})]})]})]})},u=e=>{let{soci:t,setSoci:a,totalPercentuale:i}=e;const o=e=>{a(t.filter((t=>t.id!==e)))},r=(e,i,s)=>{a(t.map((t=>t.id===e?{...t,[i]:s}:t)))};return(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Soci"}),(0,s.jsx)("button",{onClick:()=>{const e=n(t.length>0?Math.max(...t.map((e=>e.id)))+1:1);a([...t,e])},className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",children:"Aggiungi Socio"})]}),100!==i&&(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mb-4",children:["Attenzione: La somma delle percentuali di partecipazione \xe8 ",i,"%. Il totale deve essere 100%."]}),t.map((e=>(0,s.jsx)(m,{socio:e,updateSocio:r,rimuoviSocio:o},e.id)))]})},x=e=>{let{risultato:t}=e;const{socio:a,quotaUtile:i,importoBuoniPasto:o,importoBuoniPastoEsenti:n,importoBuoniPastoNonEsenti:c,importoTrasferte:d,importoTrasferteEsenti:m,importoTrasferteNonEsenti:u,contributiInps:x,redditoImponibileTotale:p,irpef:g,addizionaleRegionale:h,addizionaleComunale:b,totaleImposte:j,nettoPercepito:f}=t;return(0,s.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg shadow",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium mb-2 border-b pb-2",children:[a.nome," - ","operativo"===a.tipo?"Socio Operativo":"Socio di Capitale"," (",a.percentuale,"%)"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsx)(r,{label:"Quota Utile:",value:l(i)}),"operativo"===a.tipo&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{label:"Buoni Pasto Totali:",value:l(o)}),(0,s.jsx)(r,{label:"Rimborsi Trasferta Totali:",value:l(d)})]})]}),"operativo"===a.tipo&&o>0&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(r,{label:"Buoni Pasto Esenti:",value:l(n),bgColor:"bg-green-50"}),(0,s.jsx)(r,{label:"Buoni Pasto Non Esenti:",value:l(c),bgColor:"bg-yellow-50"})]}),"operativo"===a.tipo&&d>0&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(r,{label:"Trasferte Esenti:",value:l(m),bgColor:"bg-green-50"}),(0,s.jsx)(r,{label:"Trasferte Non Esenti:",value:l(u),bgColor:"bg-yellow-50"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsx)(r,{label:"Reddito Imponibile Totale:",value:l(p),bgColor:"bg-blue-50"}),(0,s.jsx)(r,{label:"Contributi INPS:",value:l(x),bgColor:"bg-yellow-50"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,s.jsx)(r,{label:"IRPEF:",value:l(g),bgColor:"bg-yellow-50"}),(0,s.jsx)(r,{label:"Addizionale Regionale:",value:l(h),bgColor:"bg-yellow-50"}),(0,s.jsx)(r,{label:"Addizionale Comunale:",value:l(b),bgColor:"bg-yellow-50"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(r,{label:"Totale Imposte:",value:l(j),bgColor:"bg-red-50"}),(0,s.jsx)(r,{label:"Netto Percepito:",value:l(f),bgColor:"bg-green-50"})]}),"operativo"===a.tipo&&(0,s.jsxs)("div",{className:"mt-3 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[(0,s.jsx)("p",{children:"Il netto percepito include: la quota di utile al netto delle imposte, pi\xf9 la parte esente di buoni pasto e trasferte."}),(0,s.jsx)("p",{children:"La parte non esente \xe8 inclusa nel reddito imponibile e quindi gi\xe0 considerata nel calcolo delle imposte."})]})]})};var p=a(108),g=a(9282),h=a(3439),b=a(7869),j=a(6150),f=a(1327);const v=e=>{let{fatturato:t,costi:a,costiSociOperativi:i,costiEsenti:r,costiNonEsenti:n,utileAziendale:c,irap:d,utileDopoIrap:m,risultatiSoci:u}=e;return(0,s.jsxs)(o,{title:"Report Grafico",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Ripartizione Aziendale"}),(0,s.jsx)("div",{style:{width:"100%",height:300},children:(0,s.jsx)(p.u,{children:(0,s.jsxs)(g.r,{children:[(0,s.jsxs)(h.F,{data:[{name:"Costi Base",value:a},{name:"Costi Soci (Esenti)",value:r},{name:"Costi Soci (Non Esenti)",value:n},{name:"IRAP",value:d},{name:"Utile Netto",value:m}],cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:e=>{let{name:t,percent:a}=e;return`${t}: ${(100*a).toFixed(0)}%`},children:[(0,s.jsx)(b.f,{fill:"#FF8042"}),(0,s.jsx)(b.f,{fill:"#00C49F"}),(0,s.jsx)(b.f,{fill:"#FFBB28"}),(0,s.jsx)(b.f,{fill:"#FF0000"}),(0,s.jsx)(b.f,{fill:"#0088FE"})]}),(0,s.jsx)(j.m,{formatter:e=>l(e)}),(0,s.jsx)(f.s,{})]})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Ripartizione delle Quote"}),(0,s.jsx)("div",{style:{width:"100%",height:300},children:(0,s.jsx)(p.u,{children:(0,s.jsxs)(g.r,{children:[(0,s.jsx)(h.F,{data:u.map((e=>({name:e.socio.nome,value:e.quotaUtile,tipo:e.socio.tipo}))),cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:e=>{let{name:t,percent:a}=e;return`${t}: ${(100*a).toFixed(0)}%`},children:u.map(((e,t)=>(0,s.jsx)(b.f,{fill:"operativo"===e.socio.tipo?"#0088FE":"#00C49F"},`cell-${t}`)))}),(0,s.jsx)(j.m,{formatter:e=>l(e)}),(0,s.jsx)(f.s,{})]})})})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Dettaglio Fiscale"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voce"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importo"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentuale"})]})}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Fatturato"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(t)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:"100%"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Costi Base"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(a)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(a/t*100).toFixed(2),"%"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Costi Soci Operativi (Esenti)"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(r)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(r/t*100).toFixed(2),"%"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Costi Soci Operativi (Non Esenti)"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(n)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(n/t*100).toFixed(2),"%"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Utile Aziendale"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(c)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(c/t*100).toFixed(2),"%"]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"IRAP"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(d)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(d/t*100).toFixed(2),"%"]})]}),(0,s.jsxs)("tr",{className:"bg-green-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Utile dopo IRAP"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold",children:l(m)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold",children:[(m/t*100).toFixed(2),"%"]})]})]})]})})]}),(0,s.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded",children:(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Nota fiscale:"})," I costi non esenti (parte eccedente le soglie di esenzione di buoni pasto e trasferte) sono considerati reddito del socio e non riducono l'utile aziendale. Questo riflette il trattamento fiscale corretto secondo la normativa italiana."]})})]})},N=e=>{let{fatturato:t,costi:a,costiSociOperativi:i,costiEsenti:o,costiNonEsenti:r,utileAziendale:n,irap:c,utileDopoIrap:d,soci:m,risultatiSoci:u}=e;const x=u.reduce(((e,t)=>e+t.totaleImposte),0),p=u.reduce(((e,t)=>e+t.nettoPercepito),0);return(0,s.jsxs)("div",{className:"hidden 2xl:block fixed right-4 top-4 w-64 bg-white shadow-lg rounded-lg p-4 border-l-4 border-blue-500 h-[calc(100vh-2rem)] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4 border-b pb-2",children:"Riepilogo Simulazione"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-600",children:"Dati Aziendali"}),(0,s.jsxs)("ul",{className:"mt-2 space-y-1 text-sm",children:[(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Fatturato:"}),(0,s.jsx)("span",{className:"font-medium",children:l(t)})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Costi base:"}),(0,s.jsx)("span",{className:"font-medium",children:l(a)})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Costi soci (totali):"}),(0,s.jsx)("span",{className:"font-medium",children:l(i)})]}),(0,s.jsxs)("li",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"- di cui deducibili:"}),(0,s.jsx)("span",{className:"font-medium",children:l(o)})]}),(0,s.jsxs)("li",{className:"flex justify-between text-yellow-600",children:[(0,s.jsx)("span",{children:"- di cui non deducibili:"}),(0,s.jsx)("span",{className:"font-medium",children:l(r)})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Utile:"}),(0,s.jsx)("span",{className:"font-medium",children:l(n)})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"IRAP:"}),(0,s.jsx)("span",{className:"font-medium",children:l(c)})]}),(0,s.jsxs)("li",{className:"flex justify-between font-semibold text-green-700",children:[(0,s.jsx)("span",{children:"Utile netto:"}),(0,s.jsx)("span",{children:l(d)})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsxs)("h4",{className:"font-medium text-sm text-gray-600",children:["Soci (",m.length,")"]}),(0,s.jsx)("ul",{className:"mt-2 space-y-2 text-sm",children:u.map(((e,t)=>(0,s.jsxs)("li",{className:"border-b pb-1 last:border-b-0",children:[(0,s.jsxs)("div",{className:"font-medium flex justify-between",children:[(0,s.jsx)("span",{children:e.socio.nome}),(0,s.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-1 rounded",children:"operativo"===e.socio.tipo?"Operativo":"Capitale"})]}),(0,s.jsxs)("div",{className:"text-xs flex justify-between mt-1",children:[(0,s.jsxs)("span",{children:["Quota ",e.socio.percentuale,"%:"]}),(0,s.jsx)("span",{children:l(e.quotaUtile)})]}),"operativo"===e.socio.tipo&&(0,s.jsxs)(s.Fragment,{children:[e.importoBuoniPastoEsenti+e.importoTrasferteEsenti>0&&(0,s.jsxs)("div",{className:"text-xs flex justify-between",children:[(0,s.jsx)("span",{children:"Esenti:"}),(0,s.jsx)("span",{className:"text-green-600",children:l(e.importoBuoniPastoEsenti+e.importoTrasferteEsenti)})]}),e.importoBuoniPastoNonEsenti+e.importoTrasferteNonEsenti>0&&(0,s.jsxs)("div",{className:"text-xs flex justify-between",children:[(0,s.jsx)("span",{children:"Non esenti:"}),(0,s.jsx)("span",{className:"text-yellow-600",children:l(e.importoBuoniPastoNonEsenti+e.importoTrasferteNonEsenti)})]})]}),(0,s.jsxs)("div",{className:"text-xs flex justify-between",children:[(0,s.jsx)("span",{children:"Imposte:"}),(0,s.jsx)("span",{className:"text-red-600",children:l(e.totaleImposte)})]}),(0,s.jsxs)("div",{className:"text-xs flex justify-between",children:[(0,s.jsx)("span",{children:"Netto:"}),(0,s.jsx)("span",{className:"text-green-600",children:l(e.quotaUtile-e.totaleImposte)})]}),(0,s.jsxs)("div",{className:"text-xs flex justify-between font-medium",children:[(0,s.jsx)("span",{children:"Netto Percepito:"}),(0,s.jsx)("span",{className:"text-green-800",children:l(e.nettoPercepito)})]})]},t)))})]}),(0,s.jsxs)("div",{className:"bg-green-50 p-3 rounded",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-600",children:"Totali"}),(0,s.jsxs)("ul",{className:"mt-2 space-y-1 text-sm",children:[(0,s.jsxs)("li",{className:"flex justify-between text-red-600",children:[(0,s.jsx)("span",{children:"Imposte totali:"}),(0,s.jsx)("span",{className:"font-medium",children:l(x+c)})]}),(0,s.jsxs)("li",{className:"flex justify-between text-green-600 font-semibold",children:[(0,s.jsx)("span",{children:"Netto totale:"}),(0,s.jsx)("span",{children:l(p)})]}),(0,s.jsxs)("li",{className:"flex justify-between mt-2 pt-2 border-t text-xs",children:[(0,s.jsx)("span",{children:"Pressione fiscale:"}),(0,s.jsxs)("span",{children:[((x+c)/(t-a)*100).toFixed(1),"%"]})]})]})]})]}),(0,s.jsx)("div",{className:"mt-4 text-center text-xs text-gray-500",children:"2025 Key-Code"})]})},y=e=>{let{simulationData:t,onReset:a,onResetComplete:o}=e;const[r,l]=(0,i.useState)(!1),[n,c]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-md py-3 px-6 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{c(!0);try{const e=JSON.stringify(t,null,2),a=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.download=`simulazione-sas-${(new Date).toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(i)}catch(e){console.error("Errore durante l'esportazione dei dati:",e),alert("Si \ufffd verificato un errore durante l'esportazione dei dati.")}finally{c(!1)}},disabled:n,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded shadow disabled:opacity-50",children:n?"Esportazione...":"Esporta Dati"}),(0,s.jsx)("button",{onClick:()=>{r?(l(!1),o&&o()):l(!0)},className:(r?"bg-red-500 hover:bg-red-600":"bg-gray-500 hover:bg-gray-600")+" text-white px-4 py-2 rounded shadow",children:r?"Conferma Reset":"Reset Dati"})]}),r&&(0,s.jsx)("div",{className:"text-sm text-red-500 ml-2",children:"Attenzione: questa operazione canceller\xe0 tutti i dati inseriti."}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Versione ",t.versione]})]})};var w=a(6131);const E="sas-simulator-data",S=()=>{try{const e="__test_storage__";localStorage.setItem(e,e);const t=localStorage.getItem(e)===e;return localStorage.removeItem(e),t}catch(e){return!1}},I=e=>S()?(e=>{try{const t={...e,_lastSaved:(new Date).toISOString()},a=JSON.stringify(t);return localStorage.setItem(E,a),console.log("Dati salvati con successo:",(new Date).toLocaleTimeString()),!0}catch(t){if(console.error("Errore durante il salvataggio dei dati:",t),"QuotaExceededError"===t.name)try{const t={fatturato:e.fatturato,costi:e.costi,aliquotaIrap:e.aliquotaIrap,aliquotaInps:e.aliquotaInps,_lastSaved:(new Date).toISOString(),_reduced:!0};return localStorage.setItem(E,JSON.stringify(t)),console.warn("Salvati solo i dati essenziali a causa di spazio insufficiente"),!0}catch(a){console.error("Impossibile salvare anche i dati essenziali:",a)}return!1}})(e):function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;try{const i=JSON.stringify(t),s=new Date;return s.setTime(s.getTime()+24*a*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(i)};expires=${s.toUTCString()};path=/`,!0}catch(i){return console.error("Errore durante il salvataggio del cookie:",i),!1}}(E,e),C=()=>S()?(()=>{try{const e=localStorage.getItem(E);if(!e)return console.log("Nessun dato salvato trovato"),null;const t=JSON.parse(e);return console.log("Dati caricati con successo. Ultimo salvataggio:",t._lastSaved?new Date(t._lastSaved).toLocaleString():"data sconosciuta"),t._reduced&&console.warn("Sono stati caricati solo i dati essenziali (salvataggio ridotto)"),t}catch(e){console.error("Errore durante il caricamento dei dati:",e);try{localStorage.removeItem(E),console.warn("Dati corrotti rimossi dal localStorage")}catch(t){}return null}})():(e=>{try{const t=document.cookie.split(";");for(let a=0;a<t.length;a++){const i=t[a].split("=");if(i[0].trim()===e){const e=decodeURIComponent(i[1]);return JSON.parse(e)}}return null}catch(t){return console.error("Errore durante la lettura del cookie:",t),null}})(E),P=()=>{const[e,t]=(0,i.useState)(1e5),[a,o]=(0,i.useState)(4e4),[r,l]=(0,i.useState)(3.9),[m,p]=(0,i.useState)(23.1),[g,h]=(0,i.useState)([{...n(1,"Mario Rossi"),tipo:"operativo",percentuale:60,redditoEsterno:0,giornateLavorate:220,buoniPasto:!0,valoreBuoniPasto:8,buoniPastoEsentiFino:8,trasferte:!0,giorniTrasferta:30,importoTrasfertaGiorno:50,trasfertaEsenteFino:46.48},{...n(2,"Giulia Bianchi"),tipo:"capitale",percentuale:40,redditoEsterno:3e4}]),[b,j]=(0,i.useState)([{limite:15e3,aliquota:23},{limite:28e3,aliquota:25},{limite:5e4,aliquota:35},{limite:1/0,aliquota:43}]),[f,P]=(0,i.useState)(1.73),[T,z]=(0,i.useState)(.8),[R,q]=(0,i.useState)(!1),[F,k]=(0,i.useState)(!1),[A,B]=(0,i.useState)(!0),[D,L]=(0,i.useState)(0),[O,U]=(0,i.useState)("Inizializzazione del simulatore..."),[G,_]=(0,i.useState)(!1),$=(0,i.useCallback)((()=>{t(1e5),o(4e4),l(3.9),p(23.1),h([{...n(1,"Mario Rossi"),tipo:"operativo",percentuale:60,redditoEsterno:0,giornateLavorate:220,buoniPasto:!0,valoreBuoniPasto:8,buoniPastoEsentiFino:8,trasferte:!0,giorniTrasferta:30,importoTrasfertaGiorno:50,trasfertaEsenteFino:46.48},{...n(2,"Giulia Bianchi"),tipo:"capitale",percentuale:40,redditoEsterno:3e4}]),j([{limite:15e3,aliquota:23},{limite:28e3,aliquota:25},{limite:5e4,aliquota:35},{limite:1/0,aliquota:43}]),P(1.73),z(.8)}),[]),J=(0,i.useCallback)((()=>({fatturato:e,costi:a,aliquotaIrap:r,aliquotaInps:m,soci:g,scaglioniIrpef:b,aliqRegionale:f,aliqComunale:T})),[e,a,r,m,g,b,f,T]),K=(0,i.useCallback)((()=>{_(!0),B(!0),U("Reset in corso..."),L(0);const e=setInterval((()=>{L((t=>t>=90?(clearInterval(e),t):t+5))}),50);return setTimeout((()=>{try{(()=>{try{return S()&&localStorage.removeItem(E),document.cookie=`${E}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie="sas-simulator-data=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",console.log("Dati cancellati con successo da localStorage e cookie"),!0}catch(e){return console.error("Errore durante la cancellazione dei dati:",e),!1}})()?(U("Ripristino valori predefiniti..."),L(95),$(),console.log("Reset completato con successo")):(U("Errore durante il reset. Ripristino valori predefiniti..."),console.error("Errore durante il reset dei dati"),$()),L(100),setTimeout((()=>{B(!1),_(!1),k(!1),q(!0)}),500)}catch(t){console.error("Errore critico durante il reset:",t),U("Si \ufffd verificato un errore. Ripristino forzato..."),$(),setTimeout((()=>{B(!1),_(!1),q(!0)}),1e3)}finally{clearInterval(e)}}),500),!0}),[$]);(0,i.useEffect)((()=>{(()=>{try{B(!0),U("Caricamento dati salvati..."),L(10);const e=setInterval((()=>{L((t=>t>=90?(clearInterval(e),t):t+5))}),100);setTimeout((()=>{const a=C();if(L(95),a){if(U("Elaborazione dati..."),void 0!==a.fatturato&&t(Number(a.fatturato)),void 0!==a.costi&&o(Number(a.costi)),void 0!==a.aliquotaIrap&&l(Number(a.aliquotaIrap)),void 0!==a.aliquotaInps&&p(Number(a.aliquotaInps)),a.soci&&Array.isArray(a.soci)){const e=a.soci.map(((e,t)=>({...e,id:e.id||t+1})));h(e)}a.scaglioniIrpef&&Array.isArray(a.scaglioniIrpef)&&j(a.scaglioniIrpef),void 0!==a.aliqRegionale&&P(Number(a.aliqRegionale)),void 0!==a.aliqComunale&&z(Number(a.aliqComunale)),console.log("Dati caricati con successo.")}else U("Configurazione predefinita..."),console.log("Nessun dato salvato trovato, utilizzo valori predefiniti.");L(100),setTimeout((()=>{q(!0),B(!1),clearInterval(e)}),500)}),800)}catch(e){console.error("Errore durante il caricamento dei dati:",e),U("Si \ufffd verificato un errore. Utilizzo valori predefiniti..."),setTimeout((()=>{q(!0),B(!1)}),1500)}})()}),[]),(0,i.useEffect)((()=>{R&&!G&&k(!0)}),[e,a,r,m,g,b,f,T,R,G]),(0,i.useEffect)((()=>{if(!F||!R||G)return;const e=setTimeout((()=>{const e=J();I(e)?(console.log("Salvataggio automatico completato:",(new Date).toLocaleTimeString()),k(!1)):console.warn("Salvataggio automatico non riuscito")}),1e3);return()=>clearTimeout(e)}),[F,R,G,J]);const Q=(e=>{let t=0,a=0,i=0,s=0,o=0;return e.forEach((e=>{if("operativo"===e.tipo){if(e.buoniPasto){const s=e.valoreBuoniPasto*e.giornateLavorate,o=e.valoreBuoniPasto,r=e.buoniPastoEsentiFino||8;o<=r?a+=s:(a+=r*e.giornateLavorate,i+=(o-r)*e.giornateLavorate),t+=s}if(e.trasferte){const a=e.importoTrasfertaGiorno*e.giorniTrasferta,i=e.importoTrasfertaGiorno,r=e.trasfertaEsenteFino||46.48;i<=r?s+=a:(s+=r*e.giorniTrasferta,o+=(i-r)*e.giorniTrasferta),t+=a}}})),{totale:t,dettaglio:{buoniPastoEsenti:a,buoniPastoNonEsenti:i,trasferteEsenti:s,trasferteNonEsenti:o}}})(g),M=Q.totale,V=Q.dettaglio.buoniPastoNonEsenti+Q.dettaglio.trasferteNonEsenti,H=e-a-M+V,W=H*(r/100),X=H-W,Y=g.reduce(((e,t)=>e+Number(t.percentuale)),0),Z=g.map((e=>((e,t,a,i,s,o)=>{const r=t*(e.percentuale/100);let l=0,n=0,d=0,m=0,u=0,x=0,p=0;if("operativo"===e.tipo){if(e.buoniPasto){const t=e.valoreBuoniPasto*e.giornateLavorate;l=t;const a=e.buoniPastoEsentiFino||8;e.valoreBuoniPasto<=a?(n=t,d=0):(n=a*e.giornateLavorate,d=(e.valoreBuoniPasto-a)*e.giornateLavorate)}if(e.trasferte){const t=e.importoTrasfertaGiorno*e.giorniTrasferta;m=t;const a=e.trasfertaEsenteFino||46.48;e.importoTrasfertaGiorno<=a?(u=t,x=0):(u=a*e.giorniTrasferta,x=(e.importoTrasfertaGiorno-a)*e.giorniTrasferta)}p=((e,t)=>e*(t/100))(r,a)}const g=((e,t,a,i)=>t+e.redditoEsterno+a+i)(e,r,d,x),h=c(g)-c(e.redditoEsterno),b=r*(s/100),j=(v=r,N=o,v*(N/100)),f=p+h+b+j;var v,N;return{socio:e,quotaUtile:r,importoBuoniPasto:l,importoBuoniPastoEsenti:n,importoBuoniPastoNonEsenti:d,importoTrasferte:m,importoTrasferteEsenti:u,importoTrasferteNonEsenti:x,contributiInps:p,redditoImponibileTotale:g,irpef:h,addizionaleRegionale:b,addizionaleComunale:j,totaleImposte:f,nettoPercepito:r-f+n+u}})(e,X,m,0,f,T))),ee={datiAzienda:{fatturato:e,costi:a,aliquotaIrap:r,aliquotaInps:m,costiSociOperativi:M,costiEsenti:M-V,costiNonEsenti:V,utileAziendale:H,irap:W,utileDopoIrap:X},tassazione:{scaglioniIrpef:b,aliqRegionale:f,aliqComunale:T},soci:g,risultati:Z,dataSimulazione:(new Date).toISOString(),versione:"1.0.0"};return(0,s.jsxs)("div",{className:"p-6 max-w-6xl mx-auto bg-gray-50 relative pb-16",children:[(A||G)&&(0,s.jsx)(w.A,{progress:D,message:O}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-blue-800",children:"Simulatore Tassazione SAS"}),F&&R&&!G&&(0,s.jsx)("div",{className:"fixed top-4 right-4 bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-sm shadow-md z-50",children:"Salvataggio in corso..."}),(0,s.jsx)(d,{fatturato:e,setFatturato:t,costi:a,setCosti:o,aliquotaIrap:r,setAliquotaIrap:l,aliquotaInps:m,setAliquotaInps:p,utileAziendale:H,irap:W,utileDopoIrap:X,costiSociOperativi:M,costiEsenti:M-V,costiNonEsenti:V}),(0,s.jsx)(u,{soci:g,setSoci:h,totalPercentuale:Y}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Risultati"}),Z.map(((e,t)=>(0,s.jsx)(x,{risultato:e},t)))]}),(0,s.jsx)(v,{fatturato:e,costi:a,costiSociOperativi:M,costiEsenti:M-V,costiNonEsenti:V,utileAziendale:H,irap:W,utileDopoIrap:X,risultatiSoci:Z}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mt-8",children:[(0,s.jsx)("p",{children:"Disclaimer: Questo simulatore fornisce una stima indicativa. Per calcoli precisi si consiglia di consultare un commercialista."}),(0,s.jsx)("p",{children:"Le aliquote IRPEF e i contributi INPS utilizzati sono configurabili ma potrebbero richiedere aggiornamenti in base alle normative vigenti."}),(0,s.jsx)("p",{className:"mt-4 text-center font-semibold",children:"2025 Key-Code. Tutti i diritti riservati."})]}),(0,s.jsx)(N,{fatturato:e,costi:a,costiSociOperativi:M,costiEsenti:M-V,costiNonEsenti:V,utileAziendale:H,irap:W,utileDopoIrap:X,soci:g,risultatiSoci:Z}),(0,s.jsx)(y,{simulationData:ee,onReset:K,onResetComplete:()=>{console.log("Reset completato e UI aggiornata")}})]})}}}]);
//# sourceMappingURL=962.234461ee.chunk.js.map